<!DOCTYPE html>
<html>
<head>
<TITLE>cubeTransition.js</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
<link href="css/style.css" rel="stylesheet" />
</head>
<body>
<div id="cubeTransition">
<div class="page1"><h2>cubeTransition.js</h2></div>
<div class="page2"><h2>Elegant,</h2></div>
<div class="page3"><h2>Execting!</h2></div>
<div class="page4"><h2>Simple.</h2></div>
</div>

<script>

var onGoing = false,current=1,next=2,length = 4;
 document.querySelector('#cubeTransition>div:nth-child(1)').classList.add('visible');

  document.addEventListener('keydown',function(e){
      if (e.keyCode == 38 || e && e.keyCode == 37) {
        trans('up')
      }
      if (e.keyCode == 39 || e && e.keyCode == 40) {
        trans('down')
      }
    });


  function trans(direction) {
    if (!onGoing) {
      onGoing = true;
      if (direction == 'up') {

        next = current > 2 ? current - 1 : length;
        outClass = 'rotateCubeBottomOut';
        inClass = 'rotateCubeBottomIn';
      } else {
        next = current < length ? current + 1 : 1;
        outClass = 'rotateCubeTopOut';
        inClass = 'rotateCubeTopIn';
      }
      show();
    }
  }

  function show() {
    document.querySelector('#cubeTransition>div:nth-child(' + next + ')').classList.add('visible');
    document.querySelector('#cubeTransition>div:nth-child(' + current + ')').classList.add(outClass);
    document.querySelector('#cubeTransition>div:nth-child(' + next + ')').classList.add(inClass);  

    setTimeout(function() {
      document.querySelector('#cubeTransition>div:nth-child(' +current + ')').classList.remove('visible');
      document.querySelector('#cubeTransition>div:nth-child(' + current+ ')').classList.remove(outClass);
      document.querySelector('#cubeTransition>div:nth-child(' +next + ')').classList.remove(inClass);

      current = next;
      onGoing = false;
    }, 600)
  }

</script>
</body></html>